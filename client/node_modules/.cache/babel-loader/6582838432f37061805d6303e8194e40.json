{"ast":null,"code":"import _classCallCheck from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\n\nvar _class,\n    _jsxFileName = \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/src/components/Payments/PaymentForm.jsx\";\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './styles.css';\nimport { Field, Text, TextInput } from 'shipnow-mercurio';\nimport { Columns, Column } from 'bloomer';\nimport { withStore } from '../../hocs';\nimport { observer } from 'mobx-react';\nimport { translate } from '../../lib/Translator';\nimport { priceRegex } from '../../lib/Regex';\nimport { faCoins, faMoneyBill } from \"@fortawesome/free-solid-svg-icons\";\n\nvar PaymentForm = observer(_class =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PaymentForm, _Component);\n\n  function PaymentForm(props) {\n    var _this;\n\n    _classCallCheck(this, PaymentForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PaymentForm).call(this, props));\n    _this.state = {\n      paymentType: '',\n      cashHalf: 0,\n      pointsHalf: 0,\n      validSplitPayment: false\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(PaymentForm, [{\n    key: \"getText\",\n    value: function getText(text) {\n      return translate(text, this.props.store.ui.language);\n    }\n  }, {\n    key: \"handlePaymentType\",\n    value: function handlePaymentType(type) {\n      this.setState({\n        paymentType: type\n      });\n    } //ver como se agregan mensajes al validar algo\n\n  }, {\n    key: \"validateCashPayment\",\n    value: function validateCashPayment(value) {\n      return priceRegex.test(value) && value <= this.props.totalAmount;\n    }\n  }, {\n    key: \"validatePointsPayment\",\n    value: function validatePointsPayment(value) {\n      //una vez que tengamos conversion, validar que no se este excediendo del monto total\n      return priceRegex.test(value) && value <= this.props.clientPoints;\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(sender, value, name, valid) {\n      if (name == 'cashHalf') {\n        this.setState({\n          cashHalf: value\n        });\n      }\n\n      if (name == 'pointsHalf') {\n        this.setState({\n          pointsHalf: value\n        });\n      }\n\n      this.props.onChange && this.props.onChange(sender, value, name, valid);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevState.cashHalf != this.state.cashHalf || prevState.pointsHalf != this.state.pointsHalf) {\n        this.setState({\n          validSplitPayment: this.validateCashPayment(this.state.cashHalf) && this.validatePointsPayment(this.state.pointsHalf)\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(Field, {\n        label: this.getText('Tipo de pago'),\n        labelNote: this.getText('¿De qué manera desea realizar el pago?'),\n        size: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Text, {\n        className: \"ml-1 mt-2\",\n        weight: \"medium\",\n        size: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"ml-1 mr-1\",\n        type: \"radio\",\n        value: \"loaned\",\n        onChange: function onChange() {\n          return _this2.handlePaymentType('loaned');\n        },\n        checked: this.state.paymentType == 'loaned',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), this.getText('Fiado')), React.createElement(Text, {\n        className: \"ml-1 mt-2\",\n        size: \"lg\",\n        weight: \"medium\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"ml-1 mr-1\",\n        type: \"radio\",\n        value: \"cash\",\n        onChange: function onChange() {\n          return _this2.handlePaymentType('cash');\n        },\n        checked: this.state.paymentType == 'cash',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), this.getText('Efectivo')), React.createElement(Text, {\n        className: \"ml-1 mt-2\",\n        size: \"lg\",\n        weight: \"medium\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"ml-1 mr-1\",\n        type: \"radio\",\n        value: \"points\",\n        onChange: function onChange() {\n          return _this2.handlePaymentType('points');\n        },\n        checked: this.state.paymentType == 'points',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), this.getText('Puntos')), React.createElement(Text, {\n        className: \"ml-1 mt-2\",\n        size: \"lg\",\n        weight: \"medium\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"ml-1 mr-1\",\n        type: \"radio\",\n        value: \"cashAndPoints\",\n        onChange: function onChange() {\n          return _this2.handlePaymentType('cashAndPoints');\n        },\n        checked: this.state.paymentType == 'cashAndPoints',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }), this.getText('Efectivo y puntos'))), this.state.paymentType != '' && this.state.paymentType != 'loaned' && React.createElement(Field, {\n        className: \"mt-2\",\n        label: this.getText('Ingrese los montos'),\n        labelNote: this.getText('¿Cuánto va abonar?'),\n        size: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, this.state.paymentType == 'cash' && React.createElement(TextInput, {\n        icon: faMoneyBill,\n        validate: function validate(value) {\n          return _this2.validateCashPayment(value);\n        },\n        name: \"cash\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), this.state.paymentType == 'points' && React.createElement(TextInput, {\n        icon: faCoins,\n        validate: function validate(value) {\n          return _this2.validatePointsPayment(value);\n        },\n        name: \"points\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), this.state.paymentType == 'cashAndPoints' && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Columns, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Column, {\n        isSize: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(TextInput, {\n        className: \"mt-1\",\n        icon: faMoneyBill,\n        validate: function validate() {\n          return _this2.state.validSplitPayment;\n        },\n        name: \"cashHalf\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      })), React.createElement(Column, {\n        isSize: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(TextInput, {\n        className: \"mt-1\",\n        icon: faCoins,\n        validate: function validate() {\n          return _this2.state.validSplitPayment;\n        },\n        name: \"pointsHalf\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return PaymentForm;\n}(Component)) || _class;\n\nPaymentForm.PropTypes = {\n  totalAmount: PropTypes.number,\n  clientPoints: PropTypes.number,\n  onChange: PropTypes.func\n};\nPaymentForm.defaultProps = {\n  totalAmount: 0,\n  clientPoints: 0,\n  onChange: null\n};\nexport default withStore(PaymentForm);","map":{"version":3,"sources":["/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/src/components/Payments/PaymentForm.jsx"],"names":["React","Component","PropTypes","Field","Text","TextInput","Columns","Column","withStore","observer","translate","priceRegex","faCoins","faMoneyBill","PaymentForm","props","state","paymentType","cashHalf","pointsHalf","validSplitPayment","handleChange","bind","text","store","ui","language","type","setState","value","test","totalAmount","clientPoints","sender","name","valid","onChange","prevProps","prevState","validateCashPayment","validatePointsPayment","getText","handlePaymentType","number","func","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './styles.css'\n\nimport {\n  Field,\n  Text,\n  TextInput\n} from 'shipnow-mercurio';\n\nimport {\n  Columns,\n  Column\n} from 'bloomer';\n\nimport { withStore } from '../../hocs';\n\nimport { observer } from 'mobx-react';\n\nimport { translate } from '../../lib/Translator';\n\nimport { priceRegex } from '../../lib/Regex'\n\nimport { \n  faCoins,\n  faMoneyBill\n} from \"@fortawesome/free-solid-svg-icons\";\n\n@observer\nclass PaymentForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      paymentType: '',\n      cashHalf: 0,\n      pointsHalf: 0,\n      validSplitPayment: false\n    }\n\n    this.handleChange        = this.handleChange.bind(this);\n  }\n\n  getText( text ) {\n    return translate(text, this.props.store.ui.language)\n  }\n\n  handlePaymentType( type ){\n    this.setState({\n      paymentType: type\n    })\n  }\n\n  //ver como se agregan mensajes al validar algo\n  validateCashPayment( value ){\n    return priceRegex.test(value) && value <= this.props.totalAmount\n  }\n\n  validatePointsPayment( value ){\n    //una vez que tengamos conversion, validar que no se este excediendo del monto total\n    return priceRegex.test(value) && value <= this.props.clientPoints\n  }\n\n  handleChange(sender, value, name, valid){\n    if(name =='cashHalf'){\n      this.setState({\n        cashHalf: value\n      })\n    }\n    if(name =='pointsHalf'){\n      this.setState({\n        pointsHalf: value\n      })\n    }\n    \n    this.props.onChange && this.props.onChange(sender, value, name, valid)    \n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.cashHalf != this.state.cashHalf || prevState.pointsHalf != this.state.pointsHalf ) {\n      this.setState({\n        validSplitPayment: this.validateCashPayment( this.state.cashHalf ) && this.validatePointsPayment( this.state.pointsHalf )\n      })\n    }\n  }\n\n  render() {\n    return(\n      <React.Fragment>\n        <Field label={ this.getText('Tipo de pago') } labelNote={ this.getText('¿De qué manera desea realizar el pago?') } size=\"lg\">\n          <Text className=\"ml-1 mt-2\" weight=\"medium\" size=\"lg\">\n              <input \n                className=\"ml-1 mr-1\" \n                type=\"radio\" \n                value=\"loaned\" \n                onChange={ () => (this.handlePaymentType('loaned')) }\n                checked={ this.state.paymentType == 'loaned'} />\n              { this.getText('Fiado') }\n          </Text>\n          <Text className=\"ml-1 mt-2\" size=\"lg\" weight=\"medium\">\n              <input \n                className=\"ml-1 mr-1\" \n                type=\"radio\" \n                value=\"cash\" \n                onChange={ () => (this.handlePaymentType('cash')) }\n                checked={ this.state.paymentType == 'cash'} />\n              { this.getText('Efectivo') }\n          </Text>\n          <Text className=\"ml-1 mt-2\" size=\"lg\" weight=\"medium\">\n              <input \n                className=\"ml-1 mr-1\" \n                type=\"radio\" \n                value=\"points\" \n                onChange={ () => (this.handlePaymentType('points')) }\n                checked={ this.state.paymentType == 'points'} />\n              { this.getText('Puntos') }\n          </Text>\n          <Text className=\"ml-1 mt-2\" size=\"lg\" weight=\"medium\">\n              <input \n                className=\"ml-1 mr-1\" \n                type=\"radio\" \n                value=\"cashAndPoints\" \n                onChange={ () => (this.handlePaymentType('cashAndPoints')) }\n                checked={ this.state.paymentType == 'cashAndPoints'} />\n              { this.getText('Efectivo y puntos') }\n          </Text>\n        </Field>\n        {this.state.paymentType != '' && this.state.paymentType != 'loaned' &&\n        <Field className=\"mt-2\" label={ this.getText('Ingrese los montos') } labelNote={ this.getText('¿Cuánto va abonar?') } size=\"lg\">\n\n         {this.state.paymentType == 'cash' && \n         <TextInput icon={ faMoneyBill } validate={ (value) => (this.validateCashPayment(value)) } name=\"cash\" onChange={ this.handleChange }/>}\n\n         {this.state.paymentType == 'points' && \n         <TextInput icon={ faCoins } validate={ (value) => (this.validatePointsPayment(value)) } name=\"points\" onChange={ this.handleChange }/>}\n         \n         {this.state.paymentType == 'cashAndPoints' && \n          <React.Fragment>\n            <Columns>\n              <Column isSize={ 6 }>\n                <TextInput className=\"mt-1\" icon={ faMoneyBill } validate={ () => this.state.validSplitPayment } name=\"cashHalf\" onChange={ this.handleChange }/>\n              </Column>\n              <Column isSize={ 6 }>\n                <TextInput className=\"mt-1\" icon={ faCoins } validate={ () => this.state.validSplitPayment } name=\"pointsHalf\" onChange={ this.handleChange }/>\n              </Column>\n            </Columns>\n          </React.Fragment>}\n        </Field>}\n      </React.Fragment> )\n  }\n}\n\nPaymentForm.PropTypes = {\n  totalAmount: PropTypes.number,\n  clientPoints: PropTypes.number,\n  onChange: PropTypes.func\n}\n\nPaymentForm.defaultProps = {\n  totalAmount: 0,\n  clientPoints: 0,\n  onChange: null\n}\n\nexport default withStore(PaymentForm);"]},"metadata":{},"sourceType":"module"}
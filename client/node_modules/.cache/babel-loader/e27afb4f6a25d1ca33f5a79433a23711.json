{"ast":null,"code":"import _classCallCheck from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/src/views/Session/SignIn.jsx\";\nimport React, { Component } from 'react';\nimport { Panel, TextInput, Text, Button, Img, Form } from 'shipnow-mercurio';\nimport withStore from '../../hocs/withStore';\nimport { LevelLeft, LevelRight, Level, Column, Columns } from 'bloomer';\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignIn, _Component);\n\n  function SignIn(props) {\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignIn).call(this, props));\n    _this.state = {};\n    _this.handleInputChange = _this.handleInputChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSignIn = _this.handleSignIn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.signIn = _this.signIn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.logIn = _this.logIn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"handleSignIn\",\n    value: function handleSignIn() {\n      this.setState({\n        signingIn: true\n      });\n      this.logIn();\n    }\n  }, {\n    key: \"logIn\",\n    value: function logIn() {\n      var _this2 = this;\n\n      this.setState({\n        signingIn: true\n      });\n      this.props.store.signIn(this.state.user, this.state.password).then(function (res) {// do nothing.... mobx does the magic :)\n      }).catch(function (err) {\n        _this2.setState({\n          signingIn: false,\n          signingError: err.response || err.toString()\n        });\n      });\n    }\n  }, {\n    key: \"signIn\",\n    value: function signIn(sender, formData) {\n      var _this3 = this;\n\n      if (this.props.params && this.props.params.on_boarded && this.props.params.on_boarded == 'false') {\n        //here render onBoarding page\n        this.checkAuth().then(function (res) {\n          _this3.setState({\n            onBoarding: true\n          });\n        }, function (err) {\n          _this3.setState({\n            signingIn: false,\n            signingError: err.response || err.toString()\n          });\n        });\n      } else {\n        this.logIn();\n      }\n    }\n  }, {\n    key: \"handleInputChange\",\n    value: function handleInputChange(sender, value, name, valid, securityLevel) {\n      if (value != '') {\n        var newState = {};\n        newState[name] = value;\n\n        if (securityLevel && securityLevel >= 2 && this.state.insecure) {\n          this.insecure = false;\n        }\n\n        this.setState(newState);\n      }\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(sender, value, name) {}\n  }, {\n    key: \"verifyPassword\",\n    value: function verifyPassword() {\n      var password = this.state.password;\n      return /[a-zA-Z]/.test(password) && password.length >= 8 && /\\d/.test(password);\n    }\n  }, {\n    key: \"renderSignInView\",\n    value: function renderSignInView() {\n      return React.createElement(Panel, {\n        level: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(Text, {\n        lead: true,\n        size: \"md\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Bienvenido\"), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Inici\\xE1 sesi\\xF3n para acceder a LookApp\"), React.createElement(Form, {\n        onSubmit: this.signIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(TextInput, {\n        name: \"user\",\n        size: \"lg\",\n        icon: \"user\",\n        placeholder: \"Email\",\n        className: \"is-fullwidth mt-4 mb-1\",\n        value: this.state.user,\n        disabled: this.state.signingIn,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), React.createElement(TextInput, {\n        name: \"password\",\n        size: \"lg\",\n        icon: \"lock\",\n        placeholder: \"Contrase\\xF1a\",\n        type: \"password\",\n        className: \"is-fullwidth my-1\",\n        value: this.state.password,\n        disabled: this.state.signingIn,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), this.state.signingError && React.createElement(Panel, {\n        color: \"error\",\n        className: \"mt-2\",\n        invert: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Text, {\n        multiline: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"No se pudo iniciar sesi\\xF3n. \\xBFEst\\xE1s seguro de haber puesto correctamente los datos?\")), !this.state.signingIn ? React.createElement(Button, {\n        size: \"xl\",\n        className: \"is-fullwidth mt-4 mb-2\",\n        isDefault: true,\n        kind: \"outline\",\n        name: \"signIn\",\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Iniciar sesi\\xF3n\") : React.createElement(Button, {\n        size: \"xl\",\n        className: \"is-fullwidth mt-4 mb-2\",\n        icon: \"spinner\",\n        pulse: true,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(Level, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(LevelLeft, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleClick,\n        className: \"mr-4 mt-1\",\n        kind: \"link\",\n        name: \"createAccount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Crear cuenta\")), React.createElement(LevelRight, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleRecoverPassword,\n        kind: \"link\",\n        className: \"is-fullwidth mt-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"\\xBFOlvidaste tu contrase\\xF1a?\")))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.renderSignInView();\n    }\n  }]);\n\n  return SignIn;\n}(Component);\n\nexport default withStore(SignIn);","map":{"version":3,"sources":["/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/src/views/Session/SignIn.jsx"],"names":["React","Component","Panel","TextInput","Text","Button","Img","Form","withStore","LevelLeft","LevelRight","Level","Column","Columns","SignIn","props","state","handleInputChange","bind","handleSignIn","handleClick","signIn","logIn","setState","signingIn","store","user","password","then","res","catch","err","signingError","response","toString","sender","formData","params","on_boarded","checkAuth","onBoarding","value","name","valid","securityLevel","newState","insecure","test","length","handleRecoverPassword","renderSignInView"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport { Panel, TextInput, Text, Button, Img, Form } from 'shipnow-mercurio';\n\nimport withStore from '../../hocs/withStore';\n\nimport { LevelLeft, LevelRight, Level, Column, Columns } from 'bloomer';\n\nclass SignIn extends Component {\n  insecure\n  constructor(props) {\n    super(props);\n\n    this.state = {\n    };\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSignIn      = this.handleSignIn.bind(this);\n    this.handleClick       = this.handleClick.bind(this);\n    this.signIn            = this.signIn.bind(this);\n    this.logIn             = this.logIn.bind(this);\n  }\n\n  handleSignIn() {\n    this.setState({ signingIn: true });\n\n    this.logIn()\n  }\n\n  logIn() {\n    this.setState({ signingIn: true });\n\n    this.props.store.signIn( this.state.user, this.state.password )\n      .then( res => {\n        // do nothing.... mobx does the magic :)\n      })\n      .catch( err => {\n        this.setState({ \n          signingIn: false,\n          signingError: err.response || err.toString(),\n        });\n      });\n  }\n\n  signIn(sender, formData) {\n    if (this.props.params && this.props.params.on_boarded && this.props.params.on_boarded == 'false') {\n      //here render onBoarding page\n      this.checkAuth().then(res => {\n        this.setState({\n          onBoarding: true,\n        })\n      }, err => {\n        this.setState({ \n          signingIn: false,\n          signingError: err.response || err.toString(),\n        });\n      })\n    }\n    else {\n      this.logIn()\n    }\n  }\n\n  handleInputChange(sender, value, name, valid, securityLevel) {\n    if(value != '') {\n      let newState = {};\n      newState[name] = value;\n      if(securityLevel && securityLevel >= 2 && this.state.insecure) {\n        this.insecure = false\n      }\n      this.setState(newState);\n\n    }\n  }\n\n  handleClick( sender, value, name ) {\n    \n  }\n\n  verifyPassword() {\n    const password = this.state.password;\n    return (/[a-zA-Z]/.test(password) && password.length >= 8 && /\\d/.test(password))\n  }\n\n  renderSignInView() {\n    return (\n      <Panel level=\"2\">\n        <Text lead size=\"md\">Bienvenido</Text>\n        <Text>Iniciá sesión para acceder a LookApp</Text>\n          <Form onSubmit={ this.signIn }>\n          <TextInput name=\"user\" \n                     size=\"lg\" \n                     icon=\"user\" \n                     placeholder=\"Email\" \n                     className=\"is-fullwidth mt-4 mb-1\" \n                     value={ this.state.user }\n                     disabled={ this.state.signingIn }\n                     onChange={ this.handleInputChange } />\n          <TextInput name=\"password\" \n                     size=\"lg\" \n                     icon=\"lock\" \n                     placeholder=\"Contraseña\" \n                     type=\"password\" \n                     className=\"is-fullwidth my-1\" \n                     value={ this.state.password }\n                     disabled={ this.state.signingIn }\n                     onChange={ this.handleInputChange } />\n          { this.state.signingError && \n            <Panel color=\"error\" className=\"mt-2\" invert>\n              <Text multiline>No se pudo iniciar sesión. ¿Estás seguro de haber puesto correctamente los datos?</Text>\n            </Panel> }\n          { !this.state.signingIn ?\n            <Button size=\"xl\" \n                    className=\"is-fullwidth mt-4 mb-2\" \n                    isDefault\n                    kind=\"outline\"\n                    name=\"signIn\"\n                    onClick={ this.handleClick }>\n                    Iniciar sesión\n            </Button> :\n            <Button size=\"xl\" \n                    className=\"is-fullwidth mt-4 mb-2\" \n                    icon=\"spinner\" pulse \n                    disabled /> }\n            <Level>\n              <LevelLeft>\n              <Button onClick={ this.handleClick }\n                        className=\"mr-4 mt-1\"\n                        kind=\"link\"\n                        name=\"createAccount\">\n                        Crear cuenta\n                </Button> \n              </LevelLeft>\n              <LevelRight>\n                <Button onClick={ this.handleRecoverPassword } kind=\"link\" className=\"is-fullwidth mt-1\">¿Olvidaste tu contraseña?</Button>\n              </LevelRight>\n            </Level>\n        </Form>\n      </Panel> );\n  }\n\n  render() {\n    return this.renderSignInView()\n  }\n\n}\n\nexport default withStore(SignIn);"]},"metadata":{},"sourceType":"module"}
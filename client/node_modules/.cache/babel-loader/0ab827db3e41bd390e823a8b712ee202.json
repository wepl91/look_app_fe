{"ast":null,"code":"import _defineProperty from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\n\nvar _class,\n    _jsxFileName = \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/client/src/views/Appointments/AppointmentsList.jsx\";\n\nimport React, { Component } from 'react';\nimport { observer } from 'mobx-react';\nimport { Button, Text, Title, Loader, Field, Select } from 'shipnow-mercurio';\nimport moment from 'moment';\nimport { Columns, Column, Level, LevelLeft, LevelRight } from 'bloomer';\nimport { withStore } from '../../hocs';\nimport { AppointmentCalendar } from '../../components/Appointments';\nimport { ConfirmationModal } from '../../components/ConfirmationModal';\nimport startCase from 'lodash/startCase';\nimport { faChevronCircleLeft, faChevronCircleRight, faSpinner, faChevronDown } from '@fortawesome/free-solid-svg-icons';\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\nimport { translate } from '../../lib/Translator';\n\nvar AppointmentsList = observer(_class =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AppointmentsList, _Component);\n\n  function AppointmentsList(props) {\n    var _this;\n\n    _classCallCheck(this, AppointmentsList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AppointmentsList).call(this, props));\n\n    _this.callApi = function () {\n      fetch('/api/hello').then(function (response) {\n        debugger;\n        return response.json();\n      }).then(function (myJson) {\n        debugger;\n      });\n    };\n\n    _this.chunk = _this.chunk.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleYear = _this.handleYear.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleMonth = _this.handleMonth.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleReload = _this.handleReload.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getDatesInMonth = _this.getDatesInMonth.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleProfessional = _this.handleProfessional.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      appointments: null,\n      professionals: null,\n      filterProf: 'null',\n      showCancelModal: false\n    };\n    return _this;\n  }\n\n  _createClass(AppointmentsList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var date = moment();\n      var datesInMonth = this.getDatesInMonth(date);\n      this.setState({\n        date: date,\n        datesInWeeks: this.chunk(datesInMonth, 7),\n        appointments: this.props.store.appointments.search({}, 'appointment-list-view', true),\n        professionals: this.props.store.professionals.search({}, 'professional-list-appointment-view', true)\n      });\n      this.callApi().then(function (res) {\n        debugger;\n      });\n    }\n  }, {\n    key: \"handleProfessional\",\n    value: function handleProfessional(sender, value, name) {\n      var searchFilter = value != 'null' ? {\n        professional: value\n      } : {};\n      this.setState({\n        filterProf: value,\n        appointments: this.props.store.appointments.search(searchFilter, 'appointment-list-view', true)\n      });\n    }\n  }, {\n    key: \"handleReload\",\n    value: function handleReload() {\n      this.setState({\n        appointments: this.props.store.appointments.search({}, 'appointment-list-view-reload', true)\n      });\n    }\n  }, {\n    key: \"handleMonth\",\n    value: function handleMonth(sender, value, name) {\n      var newDate = name == 'next' ? moment(this.state.date).add(1, 'months') : moment(this.state.date).subtract(1, 'months');\n      var datesInMonth = this.getDatesInMonth(newDate);\n      this.setState({\n        date: newDate,\n        datesInWeeks: this.chunk(datesInMonth, 7)\n      });\n    }\n  }, {\n    key: \"handleYear\",\n    value: function handleYear(sender, value, name) {\n      var newDate = name == 'next' ? moment(this.state.date).add(1, 'years') : moment(this.state.date).subtract(1, 'years');\n      var datesInMonth = this.getDatesInMonth(newDate);\n      this.setState({\n        date: newDate,\n        datesInWeeks: this.chunk(datesInMonth, 7)\n      });\n    }\n    /** \n    * chunk => method that \"cuts\" the array into n arrays of size you want\n    */\n\n  }, {\n    key: \"chunk\",\n    value: function chunk(arr, size) {\n      return arr.reduce(function (acc, _, i) {\n        return i % size ? acc : [].concat(_toConsumableArray(acc), [arr.slice(i, i + size)]);\n      }, []);\n    }\n  }, {\n    key: \"getDatesInMonth\",\n    value: function getDatesInMonth(date) {\n      return Array.from({\n        length: date.daysInMonth()\n      }, function (x, i) {\n        return moment(date).startOf('month').add(i, 'days');\n      });\n    }\n  }, {\n    key: \"getProfessionalList\",\n    value: function getProfessionalList() {\n      var ret = [];\n      ret.push({\n        key: this.getText('- sin profesional -'),\n        value: 'null'\n      });\n      this.state.professionals.toArray().forEach(function (prof) {\n        ret.push({\n          key: prof.fullName,\n          value: prof.id\n        });\n      });\n      return ret;\n    }\n  }, {\n    key: \"getText\",\n    value: function getText(text) {\n      return translate(text, this.props.store.ui.language);\n    }\n  }, {\n    key: \"renderLoader\",\n    value: function renderLoader() {\n      var _React$createElement;\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Level, {\n        className: \"pl-3 pr-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(LevelLeft, {\n        style: {\n          paddingRight: '6px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, this.getText('Calendario de turnos'))), React.createElement(LevelRight, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Button, {\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, this.getText('Cancelar turno de hoy')))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(Columns, {\n        className: \"pl-4 pr-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Column, {\n        isSize: 3,\n        className: \"pl-2 pr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Field, {\n        label: this.getText('¿Querés ver los turnos de un único profesional?'),\n        labelNote: this.getText('Selecciona un profesional'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(Select, (_React$createElement = {\n        value: 'null',\n        placeholder: this.getText('Profesionales'),\n        borderless: true,\n        icon: faChevronDown,\n        loading: !this.state.professionals || !this.state.professionals.isOk()\n      }, _defineProperty(_React$createElement, \"value\", [{\n        key: this.getText('- sin profesional -'),\n        value: 'null'\n      }]), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement))))), React.createElement(Loader, {\n        icon: faSpinner,\n        label: this.getText('Cargando los turnos..'),\n        className: \"fullscreen\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isAppointmentLoaded = this.state.appointments && this.state.appointments.isOk();\n      var isProfessionalsLoaded = this.state.professionals && this.state.professionals.isOk();\n      if (!isAppointmentLoaded || !isProfessionalsLoaded) return this.renderLoader();\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(Level, {\n        className: \"pl-3 pr-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(LevelLeft, {\n        style: {\n          paddingRight: '6px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, this.getText('Calendario de turnos')))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), React.createElement(Columns, {\n        className: \"pl-4 pr-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(Column, {\n        isSize: 3,\n        className: \"pl-2 pr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Field, {\n        label: this.getText('¿Querés ver los turnos de un único profesional?'),\n        labelNote: this.getText('Selecciona un profesional'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(Select, {\n        value: this.state.filterProf,\n        key: this.state.professionals,\n        onChange: this.handleProfessional,\n        placeholder: this.getText('Profesionales'),\n        borderless: true,\n        icon: faChevronDown,\n        loading: !this.state.professionals || !this.state.professionals.isOk(),\n        options: this.state.professionals && this.state.professionals.isOk() && this.getProfessionalList(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      })))), React.createElement(Columns, {\n        className: \"is-gapless is-marginless\",\n        isVCentered: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(Column, {\n        className: \"has-text-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleYear,\n        name: \"prev\",\n        kind: \"link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faChevronCircleLeft,\n        size: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }))), React.createElement(Column, {\n        className: \"has-text-centered\",\n        isSize: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(Text, {\n        weight: \"medium\",\n        size: \"xl\",\n        color: \"primaryDark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, startCase(this.state.date.format('YYYY')))), React.createElement(Column, {\n        className: \"has-text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleYear,\n        name: \"next\",\n        kind: \"link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faChevronCircleRight,\n        size: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      })))), React.createElement(Columns, {\n        className: \"pl-3\",\n        isVCentered: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(Column, {\n        className: \"has-text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleMonth,\n        name: \"prev\",\n        kind: \"outline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, \"\".concat(this.getText(startCase(moment(this.state.date).subtract(1, 'months').format('MMMM')))))), React.createElement(Column, {\n        className: \"has-text-centered\",\n        isSize: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(Text, {\n        weight: \"medium\",\n        size: \"xl\",\n        color: \"primaryDark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, this.getText(startCase(this.state.date.format('MMMM'))))), React.createElement(Column, {\n        className: \"has-text-right pr-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleMonth,\n        name: \"next\",\n        kind: \"outline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"\".concat(this.getText(startCase(moment(this.state.date).add(1, 'months').format('MMMM'))))))), React.createElement(AppointmentCalendar, {\n        onReload: this.handleReload,\n        key: this.state.datesInWeeks,\n        weeks: this.state.datesInWeeks,\n        appointments: this.state.appointments.toArray(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return AppointmentsList;\n}(Component)) || _class;\n\nexport default withStore(AppointmentsList);","map":{"version":3,"sources":["/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/client/src/views/Appointments/AppointmentsList.jsx"],"names":["React","Component","observer","Button","Text","Title","Loader","Field","Select","moment","Columns","Column","Level","LevelLeft","LevelRight","withStore","AppointmentCalendar","ConfirmationModal","startCase","faChevronCircleLeft","faChevronCircleRight","faSpinner","faChevronDown","FontAwesomeIcon","translate","AppointmentsList","props","callApi","fetch","then","response","json","myJson","chunk","bind","handleYear","handleMonth","handleReload","getDatesInMonth","handleProfessional","state","appointments","professionals","filterProf","showCancelModal","date","datesInMonth","setState","datesInWeeks","store","search","res","sender","value","name","searchFilter","professional","newDate","add","subtract","arr","size","reduce","acc","_","i","slice","Array","from","length","daysInMonth","x","startOf","ret","push","key","getText","toArray","forEach","prof","fullName","id","text","ui","language","paddingRight","isOk","isAppointmentLoaded","isProfessionalsLoaded","renderLoader","getProfessionalList","format"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { observer } from 'mobx-react';\nimport {\n    Button,\n    Text,\n    Title,\n    Loader,\n    Field,\n    Select,\n} from 'shipnow-mercurio';\nimport moment from 'moment';\n\nimport {\n    Columns,\n    Column,\n    Level,\n    LevelLeft,\n    LevelRight\n} from 'bloomer';\n\nimport { withStore } from '../../hocs'\n\nimport { AppointmentCalendar } from '../../components/Appointments';\n\nimport { ConfirmationModal } from '../../components/ConfirmationModal';\n\nimport startCase from 'lodash/startCase';\nimport { \n    faChevronCircleLeft, \n    faChevronCircleRight, \n    faSpinner, \n    faChevronDown,\n    \n} from '@fortawesome/free-solid-svg-icons'\n\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\n\nimport { translate } from '../../lib/Translator';\n@observer\nclass AppointmentsList extends Component {\n    constructor(props) {\n        super(props);\n\n        this.chunk                    = this.chunk.bind(this);\n        this.handleYear               = this.handleYear.bind(this);\n        this.handleMonth              = this.handleMonth.bind(this);\n        this.handleReload             = this.handleReload.bind(this);\n        this.getDatesInMonth          = this.getDatesInMonth.bind(this);\n        this.handleProfessional       = this.handleProfessional.bind(this);\n\n        this.state = {\n            appointments: null,\n            professionals: null,\n            filterProf: 'null',\n            showCancelModal: false,\n        }\n    }\n\n    componentDidMount() {\n        const date = moment()\n        const datesInMonth = this.getDatesInMonth(date)\n        this.setState({\n            date: date,\n            datesInWeeks: this.chunk(datesInMonth, 7),\n            appointments: this.props.store.appointments.search({}, 'appointment-list-view', true),\n            professionals: this.props.store.professionals.search({}, 'professional-list-appointment-view', true)\n        })\n        this.callApi().then(res => {\n            debugger\n        })\n    }\n\n    callApi = () => {\n        fetch('/api/hello').then(response => {\n            debugger\n            return response.json();\n          })\n          .then(function(myJson) {\n            debugger\n          });\n        \n      };\n\n    handleProfessional( sender, value, name ) {\n        const searchFilter = value != 'null' ? { professional: value } : {}\n        this.setState({\n            filterProf: value,\n            appointments: this.props.store.appointments.search(searchFilter, 'appointment-list-view', true)\n        })\n    }\n\n    handleReload() {\n        this.setState({\n            appointments: this.props.store.appointments.search({}, 'appointment-list-view-reload', true),\n        })\n    }\n\n    handleMonth(sender, value, name) {\n        let newDate = name == 'next' ? moment(this.state.date).add(1, 'months') : moment(this.state.date).subtract(1, 'months')\n        const datesInMonth = this.getDatesInMonth(newDate);\n        this.setState({\n            date: newDate,\n            datesInWeeks: this.chunk(datesInMonth, 7)\n        })\n    }\n\n    handleYear(sender, value, name) {\n        let newDate = name == 'next' ? moment(this.state.date).add(1, 'years') : moment(this.state.date).subtract(1, 'years')\n        const datesInMonth = this.getDatesInMonth(newDate);\n        this.setState({\n            date: newDate,\n            datesInWeeks: this.chunk(datesInMonth, 7)\n        })\n    }\n\n    /** \n    * chunk => method that \"cuts\" the array into n arrays of size you want\n    */\n    chunk(arr, size) {\n        return arr.reduce((acc, _, i) => (i % size) ? acc : [...acc, arr.slice(i, i + size)], []);\n    }\n\n    getDatesInMonth(date) {\n        return Array.from({ length: date.daysInMonth() }, (x, i) => moment(date).startOf('month').add(i, 'days'))\n    }\n\n    getProfessionalList() {\n        const ret = [];\n        ret.push({\n            key: this.getText('- sin profesional -'),\n            value: 'null',\n        });\n        this.state.professionals.toArray().forEach(prof => {\n            ret.push({ key: prof.fullName, value: prof.id })\n        });\n        return ret;\n    }\n\n    getText(text) {\n        return translate(text, this.props.store.ui.language)\n    }\n\n    renderLoader() {\n        return (\n            <React.Fragment>\n                <Level className=\"pl-3 pr-3\">\n                    <LevelLeft style={{ paddingRight: '6px' }}>\n                        <Title>{ this.getText('Calendario de turnos') }</Title>\n                    </LevelLeft>\n                    <LevelRight>\n                        <Button disabled>{ this.getText('Cancelar turno de hoy') }</Button>\n                    </LevelRight>\n                </Level>\n                <hr />\n                <Columns className=\"pl-4 pr-3\">\n                    <Column isSize={3} className=\"pl-2 pr-2\">\n                        <Field label={ this.getText('¿Querés ver los turnos de un único profesional?') } labelNote={ this.getText('Selecciona un profesional')}>\n                            <Select\n                                value={'null'}\n                                placeholder={ this.getText('Profesionales') }\n                                borderless\n                                icon={faChevronDown}\n                                loading={!this.state.professionals || !this.state.professionals.isOk()}\n                                value={[{key: this.getText('- sin profesional -'),value: 'null',}]}/>\n                        </Field>\n                    </Column>\n                </Columns>\n                <Loader icon={faSpinner} label={ this.getText('Cargando los turnos..') } className=\"fullscreen\" />\n            </React.Fragment>)\n    }\n\n    render() {\n        const isAppointmentLoaded = this.state.appointments && this.state.appointments.isOk();\n        const isProfessionalsLoaded = this.state.professionals && this.state.professionals.isOk();\n        if (!isAppointmentLoaded || !isProfessionalsLoaded) return this.renderLoader();\n        return (\n            <React.Fragment>\n                <Level className=\"pl-3 pr-3\">\n                    <LevelLeft style={{ paddingRight: '6px' }}>\n                        <Title>{this.getText('Calendario de turnos')}</Title>\n                    </LevelLeft>\n                </Level>\n                <hr />\n                <Columns className=\"pl-4 pr-3\">\n                    <Column isSize={3} className=\"pl-2 pr-2\">\n                        <Field label={ this.getText('¿Querés ver los turnos de un único profesional?') } labelNote={ this.getText('Selecciona un profesional')}>\n                            <Select\n                                value={this.state.filterProf}\n                                key={ this.state.professionals }\n                                onChange={ this.handleProfessional }  \n                                placeholder={ this.getText('Profesionales') }\n                                borderless\n                                icon={faChevronDown}\n                                loading={!this.state.professionals || !this.state.professionals.isOk()}\n                                options={this.state.professionals && this.state.professionals.isOk() && this.getProfessionalList()} />\n                        </Field>\n                    </Column>\n                </Columns>\n                <Columns className=\"is-gapless is-marginless\" isVCentered>\n                    <Column className=\"has-text-right\">\n                        <Button onClick={this.handleYear} name=\"prev\" kind=\"link\"><FontAwesomeIcon icon={faChevronCircleLeft} size=\"lg\" /></Button>\n                    </Column>\n                    <Column className=\"has-text-centered\" isSize={2}>\n                        <Text weight=\"medium\" size=\"xl\" color=\"primaryDark\">{startCase(this.state.date.format('YYYY'))}</Text>\n                    </Column>\n                    <Column className=\"has-text-left\">\n                        <Button onClick={this.handleYear} name=\"next\" kind=\"link\"><FontAwesomeIcon icon={faChevronCircleRight} size=\"lg\" /></Button>\n                    </Column>\n                </Columns>\n                <Columns className=\"pl-3\" isVCentered>\n                    <Column className=\"has-text-left\">\n                        <Button onClick={this.handleMonth} name=\"prev\" kind=\"outline\">{`${this.getText(startCase(moment(this.state.date).subtract(1, 'months').format('MMMM')))}`}</Button>\n                    </Column>\n                    <Column className=\"has-text-centered\" isSize={2}>\n                        <Text weight=\"medium\" size=\"xl\" color=\"primaryDark\">{this.getText(startCase(this.state.date.format('MMMM')))}</Text>\n                    </Column>\n                    <Column className=\"has-text-right pr-4\">\n                        <Button onClick={this.handleMonth} name=\"next\" kind=\"outline\">{`${this.getText(startCase(moment(this.state.date).add(1, 'months').format('MMMM')))}`}</Button>\n                    </Column>\n                </Columns>\n                <AppointmentCalendar onReload={this.handleReload} key={this.state.datesInWeeks} weeks={this.state.datesInWeeks} appointments={this.state.appointments.toArray()} />\n            </React.Fragment>)\n    }\n}\n\nexport default withStore(AppointmentsList);"]},"metadata":{},"sourceType":"module"}
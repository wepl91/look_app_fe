{"ast":null,"code":"import _classCallCheck from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/src/components/Payments/PaymentModal.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { withToastManager } from 'react-toast-notifications';\nimport { Modal, ModalHeader, ModalContent, ModalFooter, Title, Button } from 'shipnow-mercurio';\nimport { Level, LevelLeft, LevelRight } from 'bloomer';\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { PaymentForm } from './';\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\nimport { withStore } from '../../hocs';\nimport { ConfirmationModal } from '../ConfirmationModal';\n\nvar PaymentsModal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PaymentsModal, _Component);\n\n  function PaymentsModal(props) {\n    var _this;\n\n    _classCallCheck(this, PaymentsModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PaymentsModal).call(this, props));\n    _this.state = {\n      buttonDisabled: true,\n      confirmation: false,\n      appointment: _this.props.appointment,\n      confirmationData: {\n        accept: null,\n        cancel: null,\n        title: null,\n        content: null\n      }\n    };\n    _this.handleConfirm = _this.handleConfirm.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleCancelConfirm = _this.handleCancelConfirm.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePay = _this.handlePay.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(PaymentsModal, [{\n    key: \"handlePay\",\n    value: function handlePay(name) {\n      var _this2 = this;\n\n      if (name == 'cancelled') {\n        this.props.onPay && this.props.onPay('cancelled');\n      } else {\n        this.state.appointment.pay().then(function (response) {\n          _this2.props.onPay && _this2.props.onPay('paid', response);\n        });\n      }\n    }\n  }, {\n    key: \"handleCancelConfirm\",\n    value: function handleCancelConfirm() {\n      this.setState({\n        confirmation: false\n      });\n    }\n  }, {\n    key: \"handleConfirm\",\n    value: function handleConfirm() {\n      var data = {};\n      data['title'] = 'Abonar turno';\n      data['accept'] = this.handlePay;\n      data['cancel'] = this.handleCancelConfirm;\n      data['content'] = 'Estás por efectuar el pago. ¿Estás seguro?';\n      this.setState({\n        confirmation: true,\n        confirmationData: data\n      });\n    }\n  }, {\n    key: \"renderConfirmationModal\",\n    value: function renderConfirmationModal() {\n      var confirmationData = this.state.confirmationData;\n      return React.createElement(ConfirmationModal, {\n        title: confirmationData.title,\n        content: confirmationData.content,\n        onAccept: confirmationData.accept,\n        onCancel: confirmationData.cancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"getDisabled\",\n    value: function getDisabled() {\n      // return this.state.appointment && !(this.state.appointment.services.length > 0 && !this.state.buttonDisabled)\n      return false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var date = this.props.date;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        width: \"70%\",\n        height: \"90%\",\n        show: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Level, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(LevelLeft, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"\".concat(moment(date).format('LL')))), React.createElement(LevelRight, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Button, {\n        icon: \"plus\",\n        name: \"cancelled\",\n        kind: \"link\",\n        size: \"xl\",\n        onClick: function onClick() {\n          return _this3.handlePay('cancelled');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faTimes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }))))), React.createElement(ModalContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(PaymentForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      })), React.createElement(ModalFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Level, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(LevelLeft, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(Button, {\n        kind: \"outline\",\n        name: \"paid\",\n        onClick: this.handleConfirm,\n        disabled: this.getDisabled(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Pagar\"))))), this.state.confirmation && this.renderConfirmationModal());\n    }\n  }]);\n\n  return PaymentsModal;\n}(Component);\n\nPaymentsModal.PropTypes = {\n  date: PropTypes.object,\n  onPay: PropTypes.func,\n  appointment: PropTypes.object\n};\nPaymentsModal.defaultProps = {\n  date: null,\n  onPay: null,\n  appointment: null\n};\nexport default withToastManager(withStore(PaymentsModal));","map":{"version":3,"sources":["/Users/wpereyra/Documents/Universidad/PP1/look_app_fe/src/components/Payments/PaymentModal.jsx"],"names":["React","Component","PropTypes","moment","withToastManager","Modal","ModalHeader","ModalContent","ModalFooter","Title","Button","Level","LevelLeft","LevelRight","faTimes","PaymentForm","FontAwesomeIcon","withStore","ConfirmationModal","PaymentsModal","props","state","buttonDisabled","confirmation","appointment","confirmationData","accept","cancel","title","content","handleConfirm","bind","handleCancelConfirm","handlePay","name","onPay","pay","then","response","setState","data","date","format","getDisabled","renderConfirmationModal","object","func","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport moment from 'moment';\n\nimport { withToastManager } from 'react-toast-notifications';\n\nimport {\n  Modal,\n  ModalHeader,\n  ModalContent,\n  ModalFooter,\n  Title,\n  Button,\n} from 'shipnow-mercurio';\n\nimport {\n  Level,\n  LevelLeft,\n  LevelRight,\n} from 'bloomer';\n\nimport { \n  faTimes, \n} from \"@fortawesome/free-solid-svg-icons\";\n\nimport { PaymentForm } from './';\n\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\n\nimport { withStore } from '../../hocs';\n\nimport { ConfirmationModal } from '../ConfirmationModal';\n\nclass PaymentsModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      buttonDisabled: true,\n      confirmation: false,\n      appointment: this.props.appointment,\n      confirmationData: {\n        accept: null,\n        cancel: null,\n        title: null,\n        content: null,\n      }\n    }\n\n    this.handleConfirm         = this.handleConfirm.bind(this);\n    this.handleCancelConfirm = this.handleCancelConfirm.bind(this);\n    this.handlePay         = this.handlePay.bind(this);\n  }\n\n  handlePay( name ) {\n    if( name=='cancelled' ){\n      this.props.onPay && this.props.onPay('cancelled')\n    }else{\n      this.state.appointment.pay().then( response =>{ this.props.onPay && this.props.onPay('paid', response) });\n    }\n  }\n\n  handleCancelConfirm() {\n    this.setState({\n      confirmation: false,\n    })\n  }\n\n  handleConfirm( ) {\n    let data = {};\n\n    data['title']   = 'Abonar turno';\n    data['accept']  = this.handlePay;\n    data['cancel']  = this.handleCancelConfirm;\n    data['content'] = 'Estás por efectuar el pago. ¿Estás seguro?';\n\n    this.setState({\n      confirmation:true,\n      confirmationData: data,\n    });\n  }\n\n  renderConfirmationModal() {\n    const { confirmationData } = this.state;\n    return (<ConfirmationModal \n              title=   { confirmationData.title   }\n              content= { confirmationData.content } \n              onAccept={ confirmationData.accept  } \n              onCancel={ confirmationData.cancel  } />)\n  }\n\n  getDisabled() {\n    // return this.state.appointment && !(this.state.appointment.services.length > 0 && !this.state.buttonDisabled)\n    return false\n  }\n\n  render() {\n    const { date } = this.props\n    return(\n      <React.Fragment>\n        <Modal width=\"70%\" height=\"90%\" show>\n          <ModalHeader>\n            <Level>\n              <LevelLeft>\n                <Title>{ `${ moment(date).format('LL') }` }</Title>\n              </LevelLeft>\n              <LevelRight>\n              <Button icon=\"plus\" name=\"cancelled\" kind=\"link\" size=\"xl\" onClick={() => this.handlePay('cancelled') }>\n                <FontAwesomeIcon icon={ faTimes }/>\n              </Button>\n              </LevelRight>\n              </Level>\n          </ModalHeader>\n          <ModalContent>\n              <PaymentForm></PaymentForm>\n            </ModalContent>\n          <ModalFooter>\n            <Level>\n              <LevelLeft>\n                  <Button kind=\"outline\" name=\"paid\" onClick={ this.handleConfirm } disabled={ this.getDisabled() }>Pagar</Button>\n              </LevelLeft>\n            </Level>\n          </ModalFooter>\n        </Modal>\n        { this.state.confirmation && this.renderConfirmationModal() }\n      </React.Fragment>)\n  }\n}\nPaymentsModal.PropTypes = {\n  date: PropTypes.object,\n  onPay: PropTypes.func,\n  appointment: PropTypes.object\n}\n\nPaymentsModal.defaultProps = {\n  date: null,\n  onPay: null,\n  appointment: null\n}\n\nexport default withToastManager(withStore(PaymentsModal));"]},"metadata":{},"sourceType":"module"}